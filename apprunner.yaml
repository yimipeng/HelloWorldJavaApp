version: 1.0
runtime: corretto11
build:
  commands:
    build:
      - mvn clean package
      - wget https://github.com/aws-observability/aws-otel-java-instrumentation/releases/download/v1.9.0/aws-opentelemetry-agent.jar -O target/aws-opentelemetry-agent.jar

run:
  command: java -javaagent:target/aws-opentelemetry-agent.jar -jar target/HelloWorldJavaApp-1.0-SNAPSHOT.jar -Xms256m .
  network:
    port: 8080
  env:
    - name: JAVA_TOOL_OPTIONS
      value: "-javaagent:/app/aws-opentelemetry-agent.jar"

